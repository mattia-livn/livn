"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/upload/route";
exports.ids = ["app/api/upload/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mattiapicca_Documents_livn_livn_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/upload/route.ts */ \"(rsc)/./app/api/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/upload/route\",\n        pathname: \"/api/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/upload/route\"\n    },\n    resolvedPagePath: \"/Users/mattiapicca/Documents/livn/livn/app/api/upload/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mattiapicca_Documents_livn_livn_app_api_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1cGxvYWQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hdHRpYXBpY2NhJTJGRG9jdW1lbnRzJTJGbGl2biUyRmxpdm4lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWF0dGlhcGljY2ElMkZEb2N1bWVudHMlMkZsaXZuJTJGbGl2biZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDYztBQUMzRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2xpdm4taW11LWNhbGN1bGF0b3IvPzM1MjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21hdHRpYXBpY2NhL0RvY3VtZW50cy9saXZuL2xpdm4vYXBwL2FwaS91cGxvYWQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VwbG9hZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VwbG9hZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdXBsb2FkL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21hdHRpYXBpY2NhL0RvY3VtZW50cy9saXZuL2xpdm4vYXBwL2FwaS91cGxvYWQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VwbG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/upload/route.ts":
/*!*********************************!*\
  !*** ./app/api/upload/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n\n\nasync function POST(request) {\n    try {\n        console.log(\"\\uD83D\\uDD0D Upload API chiamata\");\n        // Debug variabili d'ambiente\n        console.log(\"\\uD83D\\uDCCB Env check:\");\n        console.log(\"  SUPABASE_URL:\",  true ? \"✅ Set\" : 0);\n        console.log(\"  SUPABASE_ANON:\",  true ? \"✅ Set\" : 0);\n        const formData = await request.formData();\n        const files = formData.getAll(\"files\");\n        const userId = formData.get(\"userId\") || \"anonymous\";\n        console.log(`📁 Files ricevuti: ${files.length}`);\n        console.log(`👤 User ID: ${userId}`);\n        if (!files || files.length === 0) {\n            console.log(\"❌ Nessun file ricevuto\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Nessun file caricato\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"\\uD83D\\uDCE4 Inizio upload su Supabase...\");\n        const uploadPromises = files.map((file, index)=>{\n            console.log(`  File ${index + 1}: ${file.name} (${file.size} bytes)`);\n            return (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.uploadDocument)(file, userId);\n        });\n        const uploadResults = await Promise.all(uploadPromises);\n        console.log(\"✅ Upload completato!\");\n        console.log(\"\\uD83D\\uDCCB Risultati:\", uploadResults);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            files: uploadResults,\n            message: `${files.length} file caricati con successo`\n        });\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Errore sconosciuto\";\n        const errorStack = error instanceof Error ? error.stack : \"Stack non disponibile\";\n        console.error(\"❌ Errore durante l'upload:\", error);\n        console.error(\"\\uD83D\\uDCCB Stack trace:\", errorStack);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: `Errore durante l'upload dei file: ${errorMessage}`\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3VwbG9hZC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUQ7QUFDUjtBQUV4QyxlQUFlRSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLDZCQUE2QjtRQUM3QkQsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxtQkFBbUJDLEtBQW9DLEdBQUcsVUFBVTtRQUNoRkYsUUFBUUMsR0FBRyxDQUFDLG9CQUFvQkMsS0FBeUMsR0FBRyxVQUFVO1FBRXRGLE1BQU1JLFdBQVcsTUFBTVAsUUFBUU8sUUFBUTtRQUN2QyxNQUFNQyxRQUFRRCxTQUFTRSxNQUFNLENBQUM7UUFDOUIsTUFBTUMsU0FBU0gsU0FBU0ksR0FBRyxDQUFDLGFBQXVCO1FBRW5EVixRQUFRQyxHQUFHLENBQUMsQ0FBQyxtQkFBbUIsRUFBRU0sTUFBTUksTUFBTSxDQUFDLENBQUM7UUFDaERYLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRVEsT0FBTyxDQUFDO1FBRW5DLElBQUksQ0FBQ0YsU0FBU0EsTUFBTUksTUFBTSxLQUFLLEdBQUc7WUFDaENYLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9MLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUF1QixHQUNoQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUFkLFFBQVFDLEdBQUcsQ0FBQztRQUVaLE1BQU1jLGlCQUFpQlIsTUFBTVMsR0FBRyxDQUFDLENBQUNDLE1BQU1DO1lBQ3RDbEIsUUFBUUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFaUIsUUFBUSxFQUFFLEVBQUUsRUFBRUQsS0FBS0UsSUFBSSxDQUFDLEVBQUUsRUFBRUYsS0FBS0csSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNwRSxPQUFPdkIsNkRBQWNBLENBQUNvQixNQUFNUjtRQUM5QjtRQUVBLE1BQU1ZLGdCQUFnQixNQUFNQyxRQUFRQyxHQUFHLENBQUNSO1FBRXhDZixRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLDJCQUFpQm9CO1FBRTdCLE9BQU96QixxREFBWUEsQ0FBQ2dCLElBQUksQ0FBQztZQUN2QlksU0FBUztZQUNUakIsT0FBT2M7WUFDUEksU0FBUyxDQUFDLEVBQUVsQixNQUFNSSxNQUFNLENBQUMsMkJBQTJCLENBQUM7UUFDdkQ7SUFFRixFQUFFLE9BQU9FLE9BQU87UUFDZCxNQUFNYSxlQUFlYixpQkFBaUJjLFFBQVFkLE1BQU1ZLE9BQU8sR0FBRztRQUM5RCxNQUFNRyxhQUFhZixpQkFBaUJjLFFBQVFkLE1BQU1nQixLQUFLLEdBQUc7UUFFMUQ3QixRQUFRYSxLQUFLLENBQUMsOEJBQStCQTtRQUM3Q2IsUUFBUWEsS0FBSyxDQUFDLDZCQUFtQmU7UUFDakMsT0FBT2hDLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtZQUFFQyxPQUFPLENBQUMsa0NBQWtDLEVBQUVhLGFBQWEsQ0FBQztRQUFDLEdBQzdEO1lBQUVaLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2bi1pbXUtY2FsY3VsYXRvci8uL2FwcC9hcGkvdXBsb2FkL3JvdXRlLnRzP2E4OGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgdXBsb2FkRG9jdW1lbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBVcGxvYWQgQVBJIGNoaWFtYXRhJylcbiAgICBcbiAgICAvLyBEZWJ1ZyB2YXJpYWJpbGkgZCdhbWJpZW50ZVxuICAgIGNvbnNvbGUubG9nKCfwn5OLIEVudiBjaGVjazonKVxuICAgIGNvbnNvbGUubG9nKCcgIFNVUEFCQVNFX1VSTDonLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgPyAn4pyFIFNldCcgOiAn4p2MIE1pc3NpbmcnKVxuICAgIGNvbnNvbGUubG9nKCcgIFNVUEFCQVNFX0FOT046JywgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgPyAn4pyFIFNldCcgOiAn4p2MIE1pc3NpbmcnKVxuICAgIFxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpXG4gICAgY29uc3QgZmlsZXMgPSBmb3JtRGF0YS5nZXRBbGwoJ2ZpbGVzJykgYXMgRmlsZVtdXG4gICAgY29uc3QgdXNlcklkID0gZm9ybURhdGEuZ2V0KCd1c2VySWQnKSBhcyBzdHJpbmcgfHwgJ2Fub255bW91cydcbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TgSBGaWxlcyByaWNldnV0aTogJHtmaWxlcy5sZW5ndGh9YClcbiAgICBjb25zb2xlLmxvZyhg8J+RpCBVc2VyIElEOiAke3VzZXJJZH1gKVxuICAgIFxuICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIE5lc3N1biBmaWxlIHJpY2V2dXRvJylcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05lc3N1biBmaWxlIGNhcmljYXRvJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/Cfk6QgSW5pemlvIHVwbG9hZCBzdSBTdXBhYmFzZS4uLicpXG4gICAgXG4gICAgY29uc3QgdXBsb2FkUHJvbWlzZXMgPSBmaWxlcy5tYXAoKGZpbGUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgICBGaWxlICR7aW5kZXggKyAxfTogJHtmaWxlLm5hbWV9ICgke2ZpbGUuc2l6ZX0gYnl0ZXMpYClcbiAgICAgIHJldHVybiB1cGxvYWREb2N1bWVudChmaWxlLCB1c2VySWQpXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCB1cGxvYWRSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodXBsb2FkUHJvbWlzZXMpXG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBVcGxvYWQgY29tcGxldGF0byEnKVxuICAgIGNvbnNvbGUubG9nKCfwn5OLIFJpc3VsdGF0aTonLCB1cGxvYWRSZXN1bHRzKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZmlsZXM6IHVwbG9hZFJlc3VsdHMsXG4gICAgICBtZXNzYWdlOiBgJHtmaWxlcy5sZW5ndGh9IGZpbGUgY2FyaWNhdGkgY29uIHN1Y2Nlc3NvYFxuICAgIH0pXG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3JlIHNjb25vc2NpdXRvJ1xuICAgIGNvbnN0IGVycm9yU3RhY2sgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnU3RhY2sgbm9uIGRpc3BvbmliaWxlJ1xuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgZHVyYW50ZSBsXFwndXBsb2FkOicsIGVycm9yKVxuICAgIGNvbnNvbGUuZXJyb3IoJ/Cfk4sgU3RhY2sgdHJhY2U6JywgZXJyb3JTdGFjaylcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBgRXJyb3JlIGR1cmFudGUgbCd1cGxvYWQgZGVpIGZpbGU6ICR7ZXJyb3JNZXNzYWdlfWAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwidXBsb2FkRG9jdW1lbnQiLCJQT1NUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJmb3JtRGF0YSIsImZpbGVzIiwiZ2V0QWxsIiwidXNlcklkIiwiZ2V0IiwibGVuZ3RoIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwidXBsb2FkUHJvbWlzZXMiLCJtYXAiLCJmaWxlIiwiaW5kZXgiLCJuYW1lIiwic2l6ZSIsInVwbG9hZFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsImVycm9yU3RhY2siLCJzdGFjayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDeliberaComune: () => (/* binding */ getDeliberaComune),\n/* harmony export */   getPublicUrl: () => (/* binding */ getPublicUrl),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   uploadDocument: () => (/* binding */ uploadDocument)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://kysddyoyiehkahfdfrhj.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt5c2RkeW95aWVoa2FoZmRmcmhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMjA4NjQsImV4cCI6MjA2MzU5Njg2NH0.XjK5XnRTTkod_2N_hQkHazdKKnWi0t01VCup2leT4z0\" || 0;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Funzione per caricare documenti nel bucket uploads\nasync function uploadDocument(file, userId) {\n    const fileName = `${userId}/${Date.now()}-${file.name}`;\n    const { data, error } = await supabase.storage.from(\"uploads\").upload(fileName, file);\n    if (error) {\n        throw new Error(`Errore durante l'upload: ${error.message}`);\n    }\n    return data;\n}\n// Funzione per recuperare la delibera comunale\nasync function getDeliberaComune(comune, provincia, codiceComune) {\n    const fileName = `${comune}_${provincia}_${codiceComune}.pdf`;\n    const { data, error } = await supabase.storage.from(\"imu\").download(`statements/2025/${fileName}`);\n    if (error) {\n        throw new Error(`Delibera non trovata per ${comune}: ${error.message}`);\n    }\n    return data;\n}\n// Funzione per ottenere l'URL pubblico di un file\nfunction getPublicUrl(bucket, path) {\n    const { data } = supabase.storage.from(bucket).getPublicUrl(path);\n    return data.publicUrl;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcsa0JBQWtCSCxrTkFBeUMsSUFBSTtBQUU5RCxNQUFNSyxXQUFXUCxtRUFBWUEsQ0FBQ0MsYUFBYUksaUJBQWdCO0FBRWxFLHFEQUFxRDtBQUM5QyxlQUFlRyxlQUFlQyxJQUFVLEVBQUVDLE1BQWM7SUFDN0QsTUFBTUMsV0FBVyxDQUFDLEVBQUVELE9BQU8sQ0FBQyxFQUFFRSxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFSixLQUFLSyxJQUFJLENBQUMsQ0FBQztJQUV2RCxNQUFNLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTVQsU0FBU1UsT0FBTyxDQUMzQ0MsSUFBSSxDQUFDLFdBQ0xDLE1BQU0sQ0FBQ1IsVUFBVUY7SUFFcEIsSUFBSU8sT0FBTztRQUNULE1BQU0sSUFBSUksTUFBTSxDQUFDLHlCQUF5QixFQUFFSixNQUFNSyxPQUFPLENBQUMsQ0FBQztJQUM3RDtJQUVBLE9BQU9OO0FBQ1Q7QUFFQSwrQ0FBK0M7QUFDeEMsZUFBZU8sa0JBQWtCQyxNQUFjLEVBQUVDLFNBQWlCLEVBQUVDLFlBQW9CO0lBQzdGLE1BQU1kLFdBQVcsQ0FBQyxFQUFFWSxPQUFPLENBQUMsRUFBRUMsVUFBVSxDQUFDLEVBQUVDLGFBQWEsSUFBSSxDQUFDO0lBRTdELE1BQU0sRUFBRVYsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNVCxTQUFTVSxPQUFPLENBQzNDQyxJQUFJLENBQUMsT0FDTFEsUUFBUSxDQUFDLENBQUMsZ0JBQWdCLEVBQUVmLFNBQVMsQ0FBQztJQUV6QyxJQUFJSyxPQUFPO1FBQ1QsTUFBTSxJQUFJSSxNQUFNLENBQUMseUJBQXlCLEVBQUVHLE9BQU8sRUFBRSxFQUFFUCxNQUFNSyxPQUFPLENBQUMsQ0FBQztJQUN4RTtJQUVBLE9BQU9OO0FBQ1Q7QUFFQSxrREFBa0Q7QUFDM0MsU0FBU1ksYUFBYUMsTUFBYyxFQUFFQyxJQUFZO0lBQ3ZELE1BQU0sRUFBRWQsSUFBSSxFQUFFLEdBQUdSLFNBQVNVLE9BQU8sQ0FDOUJDLElBQUksQ0FBQ1UsUUFDTEQsWUFBWSxDQUFDRTtJQUVoQixPQUFPZCxLQUFLZSxTQUFTO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2bi1pbXUtY2FsY3VsYXRvci8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgJ2h0dHBzOi8vcGxhY2Vob2xkZXIuc3VwYWJhc2UuY28nXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAncGxhY2Vob2xkZXIta2V5J1xuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSlcblxuLy8gRnVuemlvbmUgcGVyIGNhcmljYXJlIGRvY3VtZW50aSBuZWwgYnVja2V0IHVwbG9hZHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWREb2N1bWVudChmaWxlOiBGaWxlLCB1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBmaWxlTmFtZSA9IGAke3VzZXJJZH0vJHtEYXRlLm5vdygpfS0ke2ZpbGUubmFtZX1gXG4gIFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlXG4gICAgLmZyb20oJ3VwbG9hZHMnKVxuICAgIC51cGxvYWQoZmlsZU5hbWUsIGZpbGUpXG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yZSBkdXJhbnRlIGwndXBsb2FkOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgfVxuICBcbiAgcmV0dXJuIGRhdGFcbn1cblxuLy8gRnVuemlvbmUgcGVyIHJlY3VwZXJhcmUgbGEgZGVsaWJlcmEgY29tdW5hbGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREZWxpYmVyYUNvbXVuZShjb211bmU6IHN0cmluZywgcHJvdmluY2lhOiBzdHJpbmcsIGNvZGljZUNvbXVuZTogc3RyaW5nKSB7XG4gIGNvbnN0IGZpbGVOYW1lID0gYCR7Y29tdW5lfV8ke3Byb3ZpbmNpYX1fJHtjb2RpY2VDb211bmV9LnBkZmBcbiAgXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcbiAgICAuZnJvbSgnaW11JylcbiAgICAuZG93bmxvYWQoYHN0YXRlbWVudHMvMjAyNS8ke2ZpbGVOYW1lfWApXG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYERlbGliZXJhIG5vbiB0cm92YXRhIHBlciAke2NvbXVuZX06ICR7ZXJyb3IubWVzc2FnZX1gKVxuICB9XG4gIFxuICByZXR1cm4gZGF0YVxufVxuXG4vLyBGdW56aW9uZSBwZXIgb3R0ZW5lcmUgbCdVUkwgcHViYmxpY28gZGkgdW4gZmlsZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFB1YmxpY1VybChidWNrZXQ6IHN0cmluZywgcGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IHsgZGF0YSB9ID0gc3VwYWJhc2Uuc3RvcmFnZVxuICAgIC5mcm9tKGJ1Y2tldClcbiAgICAuZ2V0UHVibGljVXJsKHBhdGgpXG4gIFxuICByZXR1cm4gZGF0YS5wdWJsaWNVcmxcbn0gIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiLCJ1cGxvYWREb2N1bWVudCIsImZpbGUiLCJ1c2VySWQiLCJmaWxlTmFtZSIsIkRhdGUiLCJub3ciLCJuYW1lIiwiZGF0YSIsImVycm9yIiwic3RvcmFnZSIsImZyb20iLCJ1cGxvYWQiLCJFcnJvciIsIm1lc3NhZ2UiLCJnZXREZWxpYmVyYUNvbXVuZSIsImNvbXVuZSIsInByb3ZpbmNpYSIsImNvZGljZUNvbXVuZSIsImRvd25sb2FkIiwiZ2V0UHVibGljVXJsIiwiYnVja2V0IiwicGF0aCIsInB1YmxpY1VybCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fupload%2Froute&page=%2Fapi%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fupload%2Froute.ts&appDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmattiapicca%2FDocuments%2Flivn%2Flivn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();